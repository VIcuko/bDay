// Place all the behaviors and hooks related to the matching controller here.
// All this logic will automatically be available in application.js.

$(document).on("ready", function () {
	
  $(".edit_modal").on("click", function (event) {
    var $button = $(event.currentTarget);
    var relationship = $button.data().relationship;
    var message = $button.data().message;
    var fb_status = $button.data().fbstatus
    var tw_status = $button.data().twstatus
    var gg_status = $button.data().ggstatus
    render(relationship, message, fb_status, tw_status, gg_status)
  });
});

render = function (relationship, message, fb_status, tw_status, gg_status) {
  console.log("Rendering relationship: #" + relationship.id);
  	if (relationship.id != null){
      $(".edit-form").prop('action','/relationships?id='+relationship.id)}
    
    if (relationship.picture != null){
        $(".edit-img").prop('src',relationship.picture)}
    else{
        $(".edit-img").prop('src','/images/avatar.svg')
    };
  	$(".edit-nickname").val(relationship.nickname)
    $(".edit-email").val(relationship.email)
    $(".edit-bday").val(relationship.send_date)
    if (relationship.email != null){ 
      $(".edit-mail").val(message.send_email)}
    else{
      $(".edit-mail").prop('disabled',true)
    };
    
    if (fb_status && relationship.fb_connected){
      $(".edit-fb").val(message.send_fb)}
    else{
      $(".edit-fb").prop('disabled',true)
    };
    if (tw_status && relationship.tw_connected){
      $(".edit-tw").val(message.send_tw)}
    else{
      $(".edit-tw").prop('disabled',true)
    };

    if (gg_status && relationship.gg_connected){
      $(".edit-gg").val(message.send_gg)}
    else{
      $(".edit-gg").prop('disabled',true)
    };

    $(".edit-message").val(message.message)

      $(".edit-send").val(relationship.send_message)
    };	
  	  	

  	

        



